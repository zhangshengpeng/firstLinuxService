(function(t){function e(e){for(var i,r,a=e[0],u=e[1],c=e[2],d=0,h=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(h.length)h.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],i=!0,a=1;a<o.length;a++){var u=o[a];0!==s[u]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=o[0]))}return t}var i={},s={app:0},n=[];function r(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=i,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=u;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},1:function(t,e){},1263:function(t,e,o){},1484:function(t,e,o){"use strict";var i=o("5c92"),s=o.n(i);s.a},1812:function(t,e,o){"use strict";var i=o("1263"),s=o.n(i);s.a},"29c0":function(t,e,o){"use strict";var i=o("efb8"),s=o.n(i);s.a},"2b8c":function(t,e,o){"use strict";var i=o("5905"),s=o.n(i);s.a},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var i=o("5132"),s=o.n(i),n=o("bc3a"),r=o.n(n),a=(o("96cf"),o("3b8d")),u=o("2f62"),c=function(){return new u["a"].Store({strict:!1,state:function(){return{user:{}}},mutations:{setInfo:function(t,e){t.user=e}},actions:{getInfo:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.a.get("https://www.bixiaohe.fun/user-info");case 2:return o=t.sent,e.commit("setInfo",o.data),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),setHistory:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,o){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.a.post("https://www.bixiaohe.fun/set-game",o);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));function e(e,o){return t.apply(this,arguments)}return e}(),getHistory:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,o){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.a.post("https://www.bixiaohe.fun/get-game",o);case 2:return i=t.sent,t.abrupt("return",i.data);case 4:case"end":return t.stop()}}),t)})));function e(e,o){return t.apply(this,arguments)}return e}()}})},l=c,d=o("8bbf"),h=o.n(d),p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("header",{staticClass:"top-container"},[o("p",{staticStyle:{display:"inline-block",width:"200px",padding:"0",margin:"0",height:"50px",background:"#333333"}}),o("span",{staticStyle:{padding:"16px 36px"},on:{click:function(e){return t.$router.push("/main")}}},[o("i",{staticClass:"el-icon-s-home",staticStyle:{height:"18px","padding-right":"4px"}}),t._v("\n      大厅\n    ")]),o("span",{on:{click:function(e){return t.$router.push("/history")}}},[o("i",{staticClass:"el-icon-date",staticStyle:{height:"18px","padding-right":"4px"}}),t._v("\n      对战记录\n    ")]),o("span",{on:{click:function(e){return t.toChat()}}},[t._v("\n      好友\n    ")]),o("el-input",{staticClass:"input"},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),o("div",{staticClass:"center-container"},[o("aside",{staticClass:"left-container"},[o("div",{staticStyle:{width:"60px",height:"60px","padding-left":"70px"}},[o("img",{staticClass:"head-img",staticStyle:{width:"60px"},attrs:{src:null==t.user.url?"https://www.bixiaohe.fun/img/default.jpg":"https://www.bixiaohe.fun"+t.user.url,alt:"点击修改个人信息"},on:{click:t.changeInfo}})]),o("p",[t._v("昵称 :"+t._s(t.user.name))]),o("p",[t._v("id :"+t._s(t.user.id))]),o("p",[t._v("地址 :"+t._s(t.user.address))])]),o("div",{staticClass:"main-card"},[o("router-view")],1)]),o("el-dialog",{staticStyle:{width:"1500px"},attrs:{visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[o("el-form",{ref:"upload",staticStyle:{margin:"40px 0 0 40px","text-align":"left",width:"300px"},attrs:{model:t.upload,rules:t.uploadRule,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"头像",prop:"url"}},[o("el-upload",{staticClass:"upload",attrs:{action:"https://www.bixiaohe.fun/upload-img",method:"post",name:"user","on-success":t.headUpload}},[t.upload.url?o("img",{staticClass:"upload-img",attrs:{src:"https://www.bixiaohe.fun"+t.upload.url}}):o("i",{staticClass:"el-icon-plus"})])],1),o("el-form-item",{attrs:{label:"昵称",prop:"name"}},[o("el-input",{attrs:{size:"small"},model:{value:t.upload.name,callback:function(e){t.$set(t.upload,"name",e)},expression:"upload.name"}})],1),o("el-form-item",{attrs:{label:"地址",prop:"address"}},[o("el-input",{attrs:{size:"small"},model:{value:t.upload.address,callback:function(e){t.$set(t.upload,"address",e)},expression:"upload.address"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.uploadSubmit}},[t._v("\n            修改\n          ")])],1)],1)],1)],1)},f=[],m=(o("7f7f"),{data:function(){return{user:{url:""},houseList:{},showDialog:!1,upload:{url:"",name:"",address:""},uploadRule:{url:[{required:!0,message:"请选择图片",trigger:"blur"}],name:[{required:!0,message:"昵称不能为空",trigger:"blur"}],address:[{required:!0,message:"地址不能为空",trigger:"blur"}]}}},methods:{getInfo:function(){var t=this;this.$store.dispatch("getInfo").then((function(e){if(1==e.status)window.location.href="https://www.bixiaohe.fun";else{for(var o in t.user=t.$store.state.user,window.console.log(t.user),t.upload)t.upload[o]=t.user[o];window.console.log("upload:",t.upload),t.$socket.emit("online",t.$store.state.user.id)}})).catch((function(t){window.console.log(t)}))},changeInfo:function(){this.showDialog=!0},headUpload:function(t){this.upload.url=t.url},uploadSubmit:function(){var t=this;this.$refs.upload.validate((function(e){if(!e)return!1;t.$axios.post("https://www.bixiaohe.fun/upload-info",t.upload).then((function(e){t.user.name=e.data.name,t.user.address=e.data.address,t.user.url=e.data.url,t.showDialog=!1}))}))},toChat:function(){window.open("https://www.bixiaohe.fun/chat")}},mounted:function(){this.getInfo(),document.cookie="token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjEiLCJpYXQiOjE1NzQxNDQ2MTksImV4cCI6MTU3NDIzMTAxOX0.Wl857zRQUUClgCbaKZGq00HOi7hEJ-_3E4I74sM9ppc"}}),v=m,y=(o("5c0b"),o("2877")),b=Object(y["a"])(v,p,f,!1,null,null,null),g=b.exports,w=o("8c4f"),k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"main-container"}},[t.roomList.length?t._e():o("div",{staticClass:"no-room"},[t._v(" 暂无房间 ")]),t._l(t.roomList,(function(e,i){return o("div",{key:i,staticClass:"room-container"},[o("el-card",{attrs:{"body-style":{padding:"10px"}}},[o("div",{staticClass:"image"},[o("img",{staticClass:"room-img",attrs:{src:"https://www.bixiaohe.fun/img/"+("1"===e.type?"battle.jpg":"paint.jpg")}})]),o("div",{staticClass:"text",staticStyle:{padding:"14px"}},[o("div",[o("p",[t._v("房间号: "+t._s(e.houseId))]),o("p",[t._v("类型："+t._s(t._f("type")(e.type)))]),o("p",[t._v("玩家："+t._s(t._f("users")(e.user)))])])]),o("div",{staticClass:"bottom clearfix"},[o("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:function(o){return t.goRoom(e)}}},[t._v("进入房间")])],1)])],1)})),o("div",{staticClass:"createRoom"},[o("el-button",{staticStyle:{transform:"translate(-100%, 0)"},attrs:{round:""},on:{click:function(e){t.dialogVisible=!0}}},[t._v("创建房间")])],1),o("el-dialog",{attrs:{title:"创建房间",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("span",[t._v("类型：")]),o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.createRoom}},[t._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"提示",visible:t.showJoin,width:"30%"},on:{"update:visible":function(e){t.showJoin=e}}},[o("span",[t._v("你有正在进行中的游戏，是否进入该房间")]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.quit}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.backHouse}},[t._v("确 定")])],1)])],2)},x=[],_=(o("ac6a"),{filters:{type:function(t){switch(t){case"1":return"猜拳";case"2":return"画室"}},users:function(t){var e=t.map((function(t){return t.name}));return e.join(" | ")}},data:function(){return{roomList:[],dialogVisible:!1,options:[{value:"1",label:"石头剪刀布",disabled:!1},{value:"2",label:"多人画室",disabled:!1},{value:"3",label:"打砖块(抓紧开发中)",disabled:!1},{value:"4",label:"斗地主（暂未开放）",disabled:!0}],type:"",showJoin:!1,houseId:""}},sockets:{houseList:function(t){var e=this;this.roomList=t,t.forEach((function(t){t.user.forEach((function(o){o.id==e.$store.state.user.id&&(e.houseId=t.houseId,e.type=t.type,window.console.log("房间号：",e.houseId),e.showJoin=!0)}))})),window.console.log("房间列表"),window.console.log(this.roomList)},createHouse:function(t){var e=this;window.console.log("接收参数",t),t.forEach((function(t){t.user[0].id==e.$store.state.user.id&&(e.$store.commit("setInfo",t.user[0]),"1"==e.type?e.$router.push("/battle?houseId=".concat(t.houseId)):"2"==e.type&&e.$router.push("/paint?houseId=".concat(t.houseId)))}))},leave:function(t){window.console.log(t)}},methods:{test:function(){this.$socket.emit("action",[{x:1,y:2}])},createRoom:function(){var t={type:this.type,userId:this.$store.state.user.id,userName:this.$store.state.user.name,userUrl:this.$store.state.user.url};this.$socket.emit("createHouse",t),"3"===this.type&&this.$router.push("/click?houseId=0")},goRoom:function(t){this.$socket.emit("addUser",{houseId:t.houseId,userId:this.$store.state.user.id,userName:this.$store.state.user.name,userUrl:this.$store.state.user.url}),"1"===t.type?this.$router.push("/battle?houseId=".concat(t.houseId)):"2"===t.type?this.$router.push("/paint?houseId=".concat(t.houseId)):"3"===t.type&&this.$router.push("/click?houseId=".concat(t.houseId))},backHouse:function(){"1"==this.type?this.$router.push("/battle?houseId=".concat(this.houseId)):"2"==this.type?this.$router.push("/paint?houseId=".concat(this.houseId)):"3"==this.type&&this.$router.push("/click?houseId=".concat(this.houseId))},quit:function(){this.showJoin=!1,this.$socket.emit("userLeave",{houseId:this.houseId,userId:this.$store.state.user.id})}},mounted:function(){window.console.log("初始化"),this.$socket.emit("houseList")}}),I=_,C=(o("1812"),Object(y["a"])(I,k,x,!1,null,null,null)),$=C.exports,S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"battle"}},[o("el-button",{attrs:{icon:"el-icon-arrow-left",disabled:!!t.isReady},on:{click:t.quit}},[t._v("\n    离开\n  ")]),o("div",{staticClass:"main"},[o("div",{staticClass:"left"},[o("div",{staticClass:"card"},[o("img",{attrs:{src:"https://www.bixiaohe.fun/"+t.user.url}}),o("p",[t._v("昵称:"+t._s(t.user.name))]),o("p",[t._v("状态:"+t._s(t._f("state")(t.user.state))),t.user.state?o("i",{staticClass:"el-icon-success"}):t._e()]),t.user.operation&&0!=t.user.operation?o("p",[t._v("已确定"),o("i",{staticClass:"el-icon-success"})]):t._e()])]),o("div",{staticClass:"fight"},[""!=t.result?o("div",[o("p",{staticStyle:{"font-weight":"500"}},[t._v("对战结果")]),o("p",[t._v("我方："+t._s(t._f("operation")(t.user.operation)))]),o("p",[t._v("玩家 "+t._s(t.other.name)+"："+t._s(t._f("operation")(t.other.operation)))]),o("p",[t._v(t._s(t.result))]),o("div",[o("el-button",{attrs:{type:"primary"},on:{click:t.init}},[t._v("再来一局")]),o("el-button",{on:{click:t.quit}},[t._v("退出")])],1)]):t._e()]),o("div",{staticClass:"right"},[o("div",{staticClass:"card"},[t.other.name?o("div",[o("img",{attrs:{src:"https://www.bixiaohe.fun/"+t.other.url}}),o("p",[t._v("昵称: "+t._s(t.other.name))]),o("p",[t._v("状态:"+t._s(t._f("state")(t.other.state))),t.other.state?o("i",{staticClass:"el-icon-success"}):t._e()]),0!=t.other.operation?o("p",[t._v("已确定"),t.user.state?o("i",{staticClass:"el-icon-success"}):t._e()]):t._e()]):o("div",[o("img",{attrs:{src:"https://www.bixiaohe.fun/img/default.jpg"}}),o("p",[t._v("等待玩家加入...")])])])])]),!t.bothReady&&t.isAgain?o("div",{staticClass:"ready"},[o("el-button",{staticStyle:{"font-size":"18px"},attrs:{icon:t.isReady?"el-icon-circle-check":"",type:t.isReady?"primary":""},on:{click:t.ready}},[t._v("\n      "+t._s(t.readyButton)+"\n    ")])],1):o("div",{staticClass:"operation"},t._l(t.button,(function(e,i){return o("el-button",{key:i,attrs:{disabled:e.state,type:e.type},on:{click:function(o){return t.done(e,i)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})),1)],1)},B=[],E={filters:{state:function(t){return 1==t?"已准备":0==t?"未准备":void 0},operation:function(t){switch(t){case 1:return"石头";case 2:return"剪刀";case 3:return"布"}}},data:function(){return{user:this.$store.state.user,other:{},readyButton:"准备",isReady:!1,bothReady:!1,isAgain:!0,button:[{name:"石头",value:1,state:!1,type:""},{name:"剪刀",value:2,state:!1,type:""},{name:"布",value:3,state:!1,type:""}],result:""}},methods:{ready:function(){"准备"===this.readyButton?(this.readyButton="准备中",this.isReady=!0,this.$socket.emit("ready",{userId:this.user.id,houseId:this.$route.query.houseId,state:1})):(this.readyButton="准备",this.isReady=!1,this.$socket.emit("ready",{userId:this.user.id,houseId:this.$route.query.houseId,state:0}))},quit:function(){this.$socket.emit("userLeave",{houseId:this.$route.query.houseId,userId:this.$store.state.user.id}),this.$router.push("/main")},done:function(t,e){this.button[e].type="success",this.$socket.emit("done",{houseId:this.$route.query.houseId,userId:this.$store.state.user.id,operation:t.value}),this.button.forEach((function(t){t.state=!0}))},init:function(){this.$socket.emit("ready",{userId:this.user.id,houseId:this.$route.query.houseId,state:0}),this.isReady=!1,this.isAgain=!0,this.bothReady=!1,this.readyButton="准备",this.result="",this.button.forEach((function(t){t.type="",t.state=!1}))}},sockets:{ready:function(t){var e=this;window.console.log("状态",t);var o=!0;t.user.forEach((function(t){0==t.state&&(o=!1),t.id!=e.user.id?e.other=t:t.id==e.user.id&&(e.$store.commit("setInfo",t),e.user=t)})),t.user.length>1&&(this.bothReady=o),window.console.log(o,this.bothReady)},addUser:function(t){var e=this;window.console.log("addUser",t),t.user.forEach((function(t){t.id!=e.user.id?e.other=t:t.id==e.user.id&&(e.$store.commit("setInfo",t),e.user=t)}))},houseList:function(t){var e=this;window.console.log("房间状态变化"),t.forEach((function(t){t.houseId==e.$route.query.houseId&&1==t.user.length&&(e.other={},window.console.log("other",e.other))}))},operation:function(t){var e=this;window.console.log("出拳结果",t),t.user.forEach((function(t){t.id==e.user.id?(e.$store.commit("setInfo",t),e.user=t):t.id==e.other.id&&(e.other=t)})),0!=this.user.operation&&0!=this.other.operation&&(this.user.operation==this.other.operation?this.result="平局~":this.user.operation<this.other.operation?this.user.operation+1==this.other.operation?this.result="".concat(this.user.name,"获胜~"):this.result="".concat(this.other.name,"获胜~"):this.user.operation>this.other.operation&&(this.other.operation+1==this.user.operation?this.result="".concat(this.other.name,"获胜~"):this.result="".concat(this.user.name,"获胜~")),this.isAgain=!1,this.$store.dispatch("setHistory",{userA:this.user.id,userB:this.other.id,userAOperation:this.user.operation,userBOperation:this.other.operation,houseId:this.$route.query.houseId,type:1}))}},mounted:function(){window.console.log(this.user)}},R=E,z=(o("2b8c"),Object(y["a"])(R,S,B,!1,null,null,null)),O=z.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("div",{staticStyle:{height:"500px",width:"1000px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"true",data:t.tableData}},[o("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("date")(e.row.date))+"\n        ")]}}])}),o("el-table-column",{attrs:{label:"房间id",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.houseId)+"\n        ")]}}])}),o("el-table-column",{attrs:{label:"房间类型",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("type")(e.row.type))+"\n        ")]}}])}),o("el-table-column",{attrs:{label:"我方出拳",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("operation")(e.row.userAOperation))+"\n        ")]}}])}),o("el-table-column",{attrs:{prop:"userB",label:"玩家id"}}),o("el-table-column",{attrs:{label:"玩家出拳"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("operation")(e.row.userBOperation))+"\n        ")]}}])})],1)],1),o("div",{ref:"canvas1",staticStyle:{width:"600px",height:"400px"},attrs:{id:"echart"}})])},P=[],L=o("3eba");o("c037"),o("007d"),o("627c"),o("d28f");var q={filters:{type:function(t){if(1==t)return"猜拳"},operation:function(t){switch(t){case"1":return"石头";case"2":return"剪刀";case"3":return"布"}},date:function(t){return null==t?"-":t.slice(0,19)}},data:function(){return{tableData:[],operations:[0,0,0]}},methods:{getData:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getHistory",{userA:this.$store.state.user.id});case 2:this.tableData=t.sent,this.tableData.reverse(),e=this.tableData.map((function(t){return t.userAOperation})),e.forEach((function(t){1==t?o.operations[0]++:2==t?o.operations[1]++:3==t&&o.operations[2]++})),this.drawChart(),window.console.log(this.operations);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),drawChart:function(){var t=L.init(this.$refs.canvas1),e={title:{text:"出拳统计",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["石头","剪刀","布"]},series:[{name:"次数",type:"pie",radius:"70%",center:["50%","60%"],data:[{value:this.operations[0],name:"石头"},{value:this.operations[1],name:"剪刀"},{value:this.operations[2],name:"布"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};t.setOption(e)}},mounted:function(){this.getData()}},D=q,M=(o("1484"),Object(y["a"])(D,j,P,!1,null,null,null)),T=M.exports,J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"users"},t._l(t.list,(function(e,i){return o("div",{key:i,staticClass:"user"},[o("div",{staticClass:"head"},[o("img",{attrs:{src:"https://www.bixiaohe.fun/"+e.url}})]),o("div",{staticClass:"name"},[t._v(t._s(e.name))])])})),0),o("div",{staticStyle:{display:"flex",border:"1px solid #999999","font-size":"14px",color:"#dddddd"}},[o("div",{staticClass:"tools"},[o("canvas",{attrs:{id:"color",width:"200",height:"200"}}),o("div",{staticClass:"color-number"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.pen.color,expression:"pen.color"}],domProps:{value:t.pen.color},on:{input:function(e){e.target.composing||t.$set(t.pen,"color",e.target.value)}}})]),o("div",[t._v("\n          色板\n          "),o("div",{staticClass:"color-block"},[o("div",{staticClass:"blk1",on:{click:function(e){return t.colorBlock("#d83741")}}}),o("div",{staticClass:"blk2",on:{click:function(e){return t.colorBlock("#af26b9")}}}),o("div",{staticClass:"blk3",on:{click:function(e){return t.colorBlock("#413bda")}}}),o("div",{staticClass:"blk4",on:{click:function(e){return t.colorBlock("#12c0db")}}}),o("div",{staticClass:"blk5",on:{click:function(e){return t.colorBlock("#22db2a")}}}),o("div",{staticClass:"blk6",on:{click:function(e){return t.colorBlock("#c5d229")}}}),o("div",{staticClass:"blk7",on:{click:function(e){return t.colorBlock("#d1540f")}}}),o("div",{staticClass:"blk8",on:{click:function(e){return t.colorBlock("#ffffff")}}})])]),o("div",{staticClass:"pen"},[t._v("\n          画笔\n          "),o("div",{staticClass:"pen-list"},t._l(t.pens,(function(e,i){return o("div",{key:i,style:{background:e.bg},on:{click:function(e){return t.changeSize(i)}}},[o("div",{staticClass:"pen-size",style:{background:t.bg,width:e.size,height:e.size}})])})),0),o("el-slider",{attrs:{max:"50"},on:{change:function(e){return t.changeSize(t.pen.size)}},model:{value:t.pen.size,callback:function(e){t.$set(t.pen,"size",e)},expression:"pen.size"}})],1),o("div",[t._v("\n          透明度\n          "),o("el-slider",{attrs:{max:"10"},on:{change:function(e){return t.changePellucidity(t.pen.pellucidity)}},model:{value:t.pen.pellucidity,callback:function(e){t.$set(t.pen,"pellucidity",e)},expression:"pen.pellucidity"}})],1)]),o("canvas",{ref:"canvas",attrs:{id:"canv",width:"1000",height:"800"}})])])},U=[],A=(o("6b54"),o("6c7b"),{data:function(){return{user:this.$store.state.user,draw:!1,list:[this.$store.state.user],pen:{color:"#6b2d96",size:1,pellucidity:10},initPoint:{offsetX:1,offsetY:1},pens:[{size:"1px",bg:""},{size:"2px",bg:""},{size:"4px",bg:""},{size:"6px",bg:""},{size:"8px",bg:""},{size:"10px",bg:""},{size:"12px",bg:""},{size:"14px",bg:""},{size:"16px",bg:""}],bg:"#dddddd"}},sockets:{ac:function(t){window.console.log(t);var e=document.getElementById("canv"),o=e.getContext("2d");o.strokeStyle=t.pen.color,o.fillStyle=t.pen.color,o.lineWidth=t.pen.size,1===t.arr.length?(o.beginPath(),o.moveTo(t.arr[0].x,t.arr[0].y),o.arc(t.arr[0].x,t.arr[0].y,t.pen.size/2,0,2*Math.PI,!0),o.fill()):t.arr.forEach((function(t){o.lineTo(t.x,t.y),o.stroke()})),o.beginPath(),o.fillStyle=this.pen.color,o.lineWidth=this.pen.size},RoomInit:function(t){var e=document.getElementById("canv"),o=e.getContext("2d"),i=new Image;i.src=t,i.onload=function(){o.drawImage(i,0,0,1e3,800)}},addUser:function(t){window.console.log("addUser",t),this.list=t.user},houseList:function(t){var e=this;t.forEach((function(t){t.houseId==e.$route.query.houseId&&(e.list=t.user)}))}},methods:{canvInit:function(){var t=this,e=[],o=document.getElementById("color"),i=o.getContext("2d");i.beginPath();var s=i.createLinearGradient(0,0,0,160);s.addColorStop(0,"#f00"),s.addColorStop(1/6,"#f0f"),s.addColorStop(2/6,"#00f"),s.addColorStop(.5,"#0ff"),s.addColorStop(4/6,"#0f0"),s.addColorStop(5/6,"#ff0"),s.addColorStop(1,"#f00"),i.fillStyle=s,i.fillRect(0,0,20,160),o.addEventListener("mousedown",d,!1);var n=document.getElementById("canv"),r=n.getContext("2d");function a(o){var i=o.offsetX,s=o.offsetY;this.draw=!0,r.fillStyle=t.pen.color,r.strokeStyle=t.pen.color,r.lineWidth=t.pen.size,window.console.log("鼠标按下：",t.pen),r.arc(i,s,t.pen.size/2,0,2*Math.PI,!0),r.fill(),r.beginPath(),r.moveTo(i,s),e.push({x:i,y:s})}function u(){this.draw=!1,r.beginPath(),t.$socket.emit("action",{houseId:t.$route.query.houseId,arr:e,pen:t.pen}),e=[]}function c(o){var i=o.offsetX,s=o.offsetY;!0===this.draw&&(e.push({x:i,y:s}),r.fillStyle=t.pen.color,r.lineWidth=t.pen.size,r.lineTo(i,s),r.stroke())}function l(){this.draw=!1}function d(e){var o=i.getImageData(e.offsetX,e.offsetY,1,1);if(t.pen.color=t.rgb(o.data),e.offsetX<20){var s=i.createLinearGradient(30,0,170,0);s.addColorStop(1,t.pen.color),s.addColorStop(0,"white"),i.fillStyle=s,i.fillRect(30,0,190,160);var n=i.createLinearGradient(30,0,30,140);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=n,i.fillRect(30,0,190,160)}(e.offsetX>20||1===e.offsetX)&&(i.fillStyle=t.pen.color,i.fillRect(0,170,20,20),r.strokeStyle=t.pen.color)}r.lineCap="round",r.fillStyle="#fff",r.fillRect(0,0,1e3,800),n.addEventListener("mousedown",a,!1),n.addEventListener("mouseup",u,!1),n.addEventListener("mousemove",c,!1),n.addEventListener("mouseout",l,!1),d(this.initPoint)},rgb:function(t){var e=(1<<24)+65536*t[0]+256*t[1]+t[2];return e=e.toString(16),"#"+e.slice(1)},colorBlock:function(t){this.pen.color=t;var e=document.getElementById("color"),o=e.getContext("2d"),i=document.getElementById("canv"),s=i.getContext("2d");o.fillStyle=t,o.fillRect(0,170,20,20),s.strokeStyle=this.pen.color},changeSize:function(t){var e=this;this.pen.size=t+1;var o=document.getElementById("canv"),i=o.getContext("2d");i.lineWidth=t+1,this.pens.forEach((function(o,i){e.pens[i].bg=i===t?"#aaaaaa":""})),i.globalAlpha=.1*this.pen.pellucidity}},mounted:function(){var t=this;this.canvInit(),this.$nextTick((function(){t.$socket.emit("RoomInit",{houseId:t.$route.query.houseId,userId:t.$store.state.user.id})}))}}),X=A,H=(o("29c0"),Object(y["a"])(X,J,U,!1,null,"59dcce41",null)),V=H.exports,W=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},N=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"main"},[o("canvas",{staticStyle:{border:"solid 1px #aaaaaa"},attrs:{id:"canv",width:"800",height:"600"}})])])}],Y={data:function(){return{myBrick:{x:350,y:520},otherBrick:{x:350,y:80}}},sockets:{brick:function(t){this.otherBrick.x=t.mybrick.x,this.otherBrick.y=t.mybrick.y+20}},methods:{canvInit:function(){var t=document.getElementById("canv"),e=t.getContext("2d"),o=this;function i(t){o.myBrick.x=t.offsetX,o.myBrick.y=t.offsetY,o.$socket.emit("brick",{mybrick:o.myBrick})}t.addEventListener("mousemove",i,!1);var s=Math.random()>.5?1:-1,n=Math.random()>.5?1:-1,r={x:400,y:300,vx:parseInt(3*Math.random()+3)*s,vy:parseInt(3*Math.random()+3)*n,radius:"20",color:"#999999",draw:function(){e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI,!0),e.closePath(),e.fillStyle=this.color,e.fill()}},a={color:"#aaaaaa",draw:function(){e.beginPath(),e.strokeStyle=this.color,e.lineWidth=6,e.moveTo(o.myBrick.x-50,o.myBrick.y),e.lineTo(o.myBrick.x+50,o.myBrick.y),e.stroke(),e.beginPath(),e.strokeStyle=this.color,e.lineWidth=6,e.moveTo(o.otherBrick.x-50,o.otherBrick.y),e.lineTo(o.otherBrick.x+50,o.otherBrick.y),e.stroke()}};function u(){e.clearRect(0,0,t.width,t.height),r.draw(),a.draw(),(r.x>=t.width-20||r.x<20)&&(r.vx=-r.vx),r.y>t.height-20&&r.vy>0?r.vy=-r.vy:r.y<20&&r.vy<0&&(r.vy=-r.vy),r.y>=o.myBrick.y-20&&r.y<=o.myBrick.y+2&&r.x>=o.myBrick.x-50&&r.x<=o.myBrick.x+50&&r.vy>0&&(r.vy=-r.vy),r.y<=o.otherBrick.y+20&&r.y>=o.otherBrick.y-2&&r.x>=o.otherBrick.x-50&&r.x<=o.otherBrick.x+50&&r.vy<0&&(r.vy=-r.vy),r.x+=r.vx,r.y+=r.vy,window.requestAnimationFrame(u)}u()}},mounted:function(){this.canvInit()}},G=Y,Q=(o("b0a2"),Object(y["a"])(G,W,N,!1,null,"57884696",null)),Z=Q.exports;h.a.use(w["a"]);var F=new w["a"]({routes:[{path:"/",redirect:"/main"},{path:"/main",component:$,meta:{title:"对战大厅"}},{path:"/battle",component:O,meta:{title:"猜拳"}},{path:"/paint",component:V,meta:{title:"画室"}},{path:"/history",component:T,meta:{title:"历史记录"}},{path:"/click",component:Z,meta:{title:"敲砖块"}}]}),K=o("28dd");r.a.defaults.withCredentials=!0,h.a.prototype.$axios=r.a,h.a.use(u["a"]),h.a.use(new s.a({debug:!0,connection:"wss://www.bixiaohe.fun"})),h.a.use(K["a"]),h.a.config.productionTip=!1,F.beforeEach((function(t,e,o){t.meta.title&&(document.title=t.meta.title),o()})),new h.a({render:function(t){return t(g)},router:F,store:l}).$mount("#app")},5905:function(t,e,o){},"5c0b":function(t,e,o){"use strict";var i=o("e332"),s=o.n(i);s.a},"5c92":function(t,e,o){},"8bbf":function(t,e){t.exports=Vue},b0a2:function(t,e,o){"use strict";var i=o("d078"),s=o.n(i);s.a},d078:function(t,e,o){},e332:function(t,e,o){},efb8:function(t,e,o){}});