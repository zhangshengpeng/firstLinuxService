(function(t){function e(e){for(var o,a,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],o=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(o=!1)}o&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var o={},i={app:0},n=[];function a(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=o,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(s,o,function(e){return t[e]}.bind(null,o));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var o=s("85ec"),i=s.n(o);i.a},1707:function(t,e,s){},"1eb4":function(t,e,s){},2616:function(t,e,s){},"346a":function(t,e,s){"use strict";var o=s("2616"),i=s.n(o);i.a},"4b7e":function(t,e,s){"use strict";var o=s("a5b1"),i=s.n(o);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var o=s("2b0e"),i=s("5c96"),n=s.n(i),a=(s("0fae"),s("bc3a")),r=s.n(a),l=s("5132"),c=s.n(l),u=(s("96cf"),s("1da1")),d=s("2f62");r.a.defaults.withCredentials=!0,o["default"].prototype.$axios=r.a;var p=function(){return new d["a"].Store({strict:!1,state:function(){return{user:{}}},mutations:{setInfo:function(t,e){t.user=e}},actions:{getInfo:function(t){return Object(u["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.a.get("https://www.bixiaohe.fun/user-info");case 2:return s=e.sent,t.commit("setInfo",s.data),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))()},setHistory:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.a.post("https://www.bixiaohe.fun/set-game",e);case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})))()},getHistory:function(t,e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.a.post("https://www.bixiaohe.fun/get-game",e);case 2:return s=t.sent,t.abrupt("return",s.data);case 4:case"end":return t.stop()}}),t)})))()}}})},f=p,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},m=[],g={name:"App",components:{}},v=g,w=(s("034f"),s("2877")),b=Object(w["a"])(v,h,m,!1,null,null,null),x=b.exports,y=s("8c4f"),k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg"},[s("div",{staticClass:"main"},[s("div",{staticClass:"login"},[s("h1",[t._v("多人在线协同作画系统")]),s("div",{staticClass:"form"},[s("p",[t._v("账号")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.id,expression:"loginForm.id"}],staticClass:"ipt",attrs:{type:"text",autocomplete:"off"},domProps:{value:t.loginForm.id},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"id",e.target.value)}}}),s("p",{staticStyle:{"margin-top":"40px"}},[t._v("密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],staticClass:"ipt",attrs:{type:"password"},domProps:{value:t.loginForm.password},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value)}}}),s("div",{staticClass:"submit"},[s("button",{staticClass:"signIn",staticStyle:{background:"rgb(94,160,246)","box-shadow":"0 0 10px rgb(94,160,246)"},on:{click:t.login}},[t._v(" 登 录 ")]),s("button",{staticClass:"register",staticStyle:{background:"rgb(141,81,117)","box-shadow":"0 0 10px rgb(141,81,117)"},on:{click:function(e){t.dialogForm=!0}}},[t._v(" 注 册 ")]),s("el-dialog",{attrs:{title:"注册",visible:t.dialogForm,modal:!0,width:"500px"},on:{"update:visible":function(e){t.dialogForm=e}}},[s("div",{staticClass:"sign-form"},[s("p",[t._v("账号")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.signForm.id,expression:"signForm.id"}],staticClass:"ipt",attrs:{type:"text"},domProps:{value:t.signForm.id},on:{input:function(e){e.target.composing||t.$set(t.signForm,"id",e.target.value)}}}),s("p",[t._v("密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.signForm.password,expression:"signForm.password"}],staticClass:"ipt",attrs:{type:"password"},domProps:{value:t.signForm.password},on:{input:function(e){e.target.composing||t.$set(t.signForm,"password",e.target.value)}}}),s("p",[t._v("确认密码")]),s("input",{staticClass:"ipt",attrs:{type:"password"}}),s("div",{staticClass:"sign-submit"},[s("button",{staticStyle:{background:"rgb(94,160,246)"},on:{click:t.register}},[t._v("确定")]),s("button",{on:{click:function(e){t.dialogForm=!1}}},[t._v("取消")])])])])],1)])]),t._m(0)])])},C=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"img"},[o("img",{attrs:{src:s("bef0")}})])}],$={data:function(){return{dialogForm:!1,loginForm:{id:"",password:""},signForm:{id:"",password:""}}},methods:{register:function(){var t=this;this.$axios.post("https://www.bixiaohe.fun/insert",{id:this.signForm.id,password:this.signForm.password}).then((function(e){console.log("注册结果：",e),"0"===e.data.status?t.$message.error("账号已存在"):"1"===e.data.status&&(t.$message({message:"注册成功",type:"success"}),t.dialogForm=!1)})).catch((function(t){console.log(t)}))},login:function(){var t=this;this.$axios.post("https://www.bixiaohe.fun/login",{id:this.loginForm.id,password:this.loginForm.password}).then((function(e){console.log("登录结果：",e),"0"===e.data.status?t.$message.error("登录失败"):"1"===e.data.status&&(document.cookie="token="+"".concat(e.data.token)+";path=/",t.$socket.emit("online",t.$store.state.user.id),t.$router.push("/hall"))})).catch((function(t){console.log(t)}))}},mounted:function(){document.cookie="token=''"}},_=$,I=(s("4b7e"),Object(w["a"])(_,k,C,!1,null,"89e3a828",null)),S=I.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",{staticClass:"top-container"},[s("p",{staticStyle:{display:"inline-block",width:"200px",padding:"0",margin:"0",height:"50px",background:"#333333"}}),s("span",{staticStyle:{padding:"16px 36px"},on:{click:function(e){return t.$router.push("/hall")}}},[s("i",{staticClass:"el-icon-s-home",staticStyle:{height:"18px","padding-right":"4px"}}),t._v(" 大厅 ")]),s("span",{on:{click:function(e){return t.$router.push("/history")}}},[s("i",{staticClass:"el-icon-date",staticStyle:{height:"18px","padding-right":"4px"}}),t._v(" 绘画记录 ")]),s("span",{on:{click:function(e){return t.toChat()}}},[t._v(" 好友 ")]),s("el-input",{staticClass:"input"},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),s("div",{staticClass:"center-container"},[s("aside",{staticClass:"left-container"},[s("div",{staticStyle:{width:"60px",height:"60px","padding-left":"70px"}},[s("img",{staticClass:"head-img",staticStyle:{width:"60px"},attrs:{src:null==t.user.url?"https://www.bixiaohe.fun/img/default.jpg":"https://www.bixiaohe.fun"+t.user.url,alt:"点击修改个人信息"},on:{click:t.changeInfo}})]),s("p",[t._v("昵称 :"+t._s(t.user.name))]),s("p",[t._v("id :"+t._s(t.user.id))]),s("p",[t._v("地址 :"+t._s(t.user.address))])]),s("div",{staticClass:"main-card"},[s("router-view")],1)]),s("el-dialog",{staticStyle:{width:"1500px"},attrs:{visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[s("el-form",{ref:"upload",staticStyle:{margin:"40px 0 0 40px","text-align":"left",width:"300px"},attrs:{model:t.upload,rules:t.uploadRule,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"头像",prop:"url"}},[s("el-upload",{staticClass:"upload",attrs:{action:"https://www.bixiaohe.fun/upload-img",method:"post",name:"user","on-success":t.headUpload}},[t.upload.url?s("img",{staticClass:"upload-img",attrs:{src:"https://www.bixiaohe.fun"+t.upload.url}}):s("i",{staticClass:"el-icon-plus"})])],1),s("el-form-item",{attrs:{label:"昵称",prop:"name"}},[s("el-input",{attrs:{size:"small"},model:{value:t.upload.name,callback:function(e){t.$set(t.upload,"name",e)},expression:"upload.name"}})],1),s("el-form-item",{attrs:{label:"地址",prop:"address"}},[s("el-input",{attrs:{size:"small"},model:{value:t.upload.address,callback:function(e){t.$set(t.upload,"address",e)},expression:"upload.address"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.uploadSubmit}},[t._v(" 修改 ")])],1)],1)],1),s("el-drawer",{attrs:{title:"好友列表","with-header":!1,size:"50%",visible:t.showChat},on:{"update:visible":function(e){t.showChat=e}}},[s("div",[s("chat")],1)])],1)},F=[],E=(s("b0c0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"flex-box"},[o("div",{staticClass:"contact"},[o("ul",[t.contactors.length?t._e():o("li",{staticStyle:{background:"none",color:"#aaaaaa","justify-content":"center"}},[t._v("暂无好友")]),t._l(t.contactors,(function(e,s){return o("li",{key:s,class:s===t.isActive?"active":"",on:{click:function(o){return t.handelclick(e,s)}}},[o("img",{staticClass:"head-img",attrs:{src:"https://www.bixiaohe.fun"+e.url}}),o("span",{staticStyle:{width:"60px"}},[t._v(t._s(e.name))]),o("span",{class:e.isNew?"new-msg":""}),o("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:s===t.isActive,expression:"index === isActive"}],staticClass:"operation",attrs:{size:"small"},on:{command:t.operation}},[o("span",[o("i",{staticClass:"el-icon-more"})]),o("el-dropdown-menu",[o("el-dropdown-item",{staticStyle:{background:"#fff"},attrs:{command:"check"}},[t._v("查看")]),o("el-dropdown-item",{staticStyle:{background:"#fff"},attrs:{command:e.id}},[t._v("删除好友")])],1)],1)],1)}))],2),o("ul",[o("li",{staticClass:"add",on:{click:t.add}},[o("img",{staticClass:"head-img",attrs:{src:s("bf5a")}}),o("span",{staticStyle:{"padding-top":"10px"}},[t._v("添加好友")])])])]),o("div",{directives:[{name:"show",rawName:"v-show",value:0===t.page,expression:"page === 0"}],staticClass:"message"}),o("div",{directives:[{name:"show",rawName:"v-show",value:1===t.page,expression:"page === 1"}]},[o("el-form",{staticStyle:{margin:"40px 0 0 40px","text-align":"left"},attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{label:"id"}},[o("el-input",{attrs:{size:"small"},model:{value:t.addId,callback:function(e){t.addId=e},expression:"addId"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addSubmit}},[t._v("添加")])],1)],1)],1)])])}),j=[],P=(s("4160"),s("159b"),{props:{},data:function(){return{user:this.$store.state.user,contactors:[],isActive:"0",page:0,addId:"",isNew:[]}},mounted:function(){this.getFriend()},methods:{getFriend:function(){var t=this;this.$axios.post("https://www.bixiaohe.fun/friend-info").then((function(e){t.contactors=e.data,t.contactors.forEach((function(e,s){t.$set(t.contactors[s],"isNew",!1)}))})).catch((function(t){console.log(t)}))},add:function(){this.page=1,console.log(this.page)},handelclick:function(t,e){var s=this;this.isActive=e,this.friend=t,this.page=0,this.contactors[e].isNew=!1,this.$axios.post("https://www.bixiaohe.fun/history",{userId:this.user.id,friendId:t.id}).then((function(t){console.log(t),s.$set(s.contactors[e],"messages",t.data)})).catch((function(t){console.log(t)}))},ding:function(t){var e=this;this.isActive!==t&&this.contactors.forEach((function(s,o){s.id===t&&(e.contactors[o].isNew=!0)}))},operation:function(t){"check"===t?console.log(t):this.$axios.post("https://www.bixiaohe.fun/friend",{friend_id:t,user_id:this.user.id,operation:"delete"}).then((function(t){console.log(t)}))},addSubmit:function(){var t=this;this.addId==this.user.id?this.$message({showClose:!0,message:"不能添加自己为好友",type:"error"}):this.$axios.post("https://www.bixiaohe.fun/friend",{operation:"add",friend_id:this.addId,user_id:this.user.id}).then((function(e){1==e.data.status?t.$message({showClose:!0,message:"该用户不存在！",type:"error"}):2==e.data.status?t.$message({showClose:!0,message:"你们已经是好友",type:"warning"}):0==e.data.status?t.$message({showClose:!0,message:"添加成功",type:"success"}):t.$message({showClose:!0,message:"添加失败",type:"warning"})}))}}}),R=P,O=(s("9255"),Object(w["a"])(R,E,j,!1,null,null,null)),L=O.exports,B={components:{chat:L},data:function(){return{user:{url:""},houseList:{},showDialog:!1,showChat:!1,upload:{url:"",name:"",address:""},uploadRule:{url:[{required:!0,message:"请选择图片",trigger:"blur"}],name:[{required:!0,message:"昵称不能为空",trigger:"blur"}],address:[{required:!0,message:"地址不能为空",trigger:"blur"}]}}},methods:{getInfo:function(){var t=this;this.$store.dispatch("getInfo").then((function(e){if(1==e.status)window.location.href="https://www.bixiaohe.fun";else{for(var s in t.user=t.$store.state.user,window.console.log(t.user),t.upload)t.upload[s]=t.user[s];window.console.log("upload:",t.upload),t.$socket.emit("online",t.$store.state.user.id)}})).catch((function(t){window.console.log(t)}))},changeInfo:function(){this.showDialog=!0},headUpload:function(t){this.upload.url=t.url},uploadSubmit:function(){var t=this;this.$refs.upload.validate((function(e){if(!e)return!1;t.$axios.post("https://www.bixiaohe.fun/upload-info",t.upload).then((function(e){t.user.name=e.data.name,t.user.address=e.data.address,t.user.url=e.data.url,t.showDialog=!1}))}))},toChat:function(){this.showChat=!0}},mounted:function(){this.getInfo()}},N=B,q=(s("346a"),Object(w["a"])(N,z,F,!1,null,"49897f91",null)),A=q.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main-container"}},[t.roomList.length?t._e():s("div",{staticClass:"no-room"},[t._v(" 暂无房间 ")]),t._l(t.roomList,(function(e,o){return s("div",{key:o,staticClass:"room-container"},[s("el-card",{attrs:{"body-style":{padding:"10px"}}},[s("div",{staticClass:"image"},[s("img",{staticClass:"room-img",attrs:{src:"https://www.bixiaohe.fun/img/"+("1"===e.type?"battle.jpg":"paint.jpg")}})]),s("div",{staticClass:"text",staticStyle:{padding:"14px"}},[s("div",[s("p",[t._v("房间号: "+t._s(e.houseId))]),s("p",[t._v("玩家："+t._s(t._f("users")(e.user)))])])]),s("div",{staticClass:"bottom clearfix"},[s("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:function(s){return t.goRoom(e)}}},[t._v("进入画室")])],1)])],1)})),s("div",{staticClass:"createRoom"},[s("el-button",{staticStyle:{transform:"translate(-100%, 0)"},attrs:{round:""},on:{click:t.createRoom}},[t._v("创建画室")])],1),s("el-dialog",{attrs:{title:"提示",visible:t.showJoin,width:"30%"},on:{"update:visible":function(e){t.showJoin=e}}},[s("span",[t._v("你有正在进行中的游戏，是否进入该房间")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.quit}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.backHouse}},[t._v("确 定")])],1)])],2)},J=[],U=(s("a15b"),s("d81d"),{filters:{type:function(t){switch(t){case"1":return"猜拳";case"2":return"画室"}},users:function(t){var e=t.map((function(t){return t.name}));return e.join(" | ")}},data:function(){return{roomList:[],type:"",showJoin:!1,houseId:""}},sockets:{houseList:function(t){var e=this;this.roomList=t,t.forEach((function(t){t.user.forEach((function(s){s.id==e.$store.state.user.id&&(e.houseId=t.houseId,e.type=t.type,window.console.log("房间号：",e.houseId),e.showJoin=!0)}))})),window.console.log("房间列表"),window.console.log(this.roomList)},createHouse:function(t){var e=this;window.console.log("接收参数",t),t.forEach((function(t){t.user[0].id==e.$store.state.user.id&&(e.$store.commit("setInfo",t.user[0]),"2"==e.type&&e.$router.push("/paint?houseId=".concat(t.houseId)))}))},leave:function(t){window.console.log(t)}},methods:{test:function(){this.$socket.emit("action",[{x:1,y:2}])},createRoom:function(){var t={type:"2",userId:this.$store.state.user.id,userName:this.$store.state.user.name,userUrl:this.$store.state.user.url};this.$socket.emit("createHouse",t)},goRoom:function(t){this.$socket.emit("addUser",{houseId:t.houseId,userId:this.$store.state.user.id,userName:this.$store.state.user.name,userUrl:this.$store.state.user.url}),"1"===t.type?this.$router.push("/battle?houseId=".concat(t.houseId)):"2"===t.type?this.$router.push("/paint?houseId=".concat(t.houseId)):"3"===t.type?this.$router.push("/click?houseId=".concat(t.houseId)):"4"===t.type&&this.$router.push("/mali?houseId=".concat(t.houseId))},backHouse:function(){"1"==this.type?this.$router.push("/battle?houseId=".concat(this.houseId)):"2"==this.type?this.$router.push("/paint?houseId=".concat(this.houseId)):"3"==this.type&&this.$router.push("/click?houseId=".concat(this.houseId))},quit:function(){this.showJoin=!1,this.$socket.emit("userLeave",{houseId:this.houseId,userId:this.$store.state.user.id})}},mounted:function(){window.console.log("初始化"),this.$socket.emit("houseList")}}),X=U,D=(s("9086"),Object(w["a"])(X,T,J,!1,null,null,null)),H=D.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"users"},t._l(t.list,(function(e,o){return s("div",{key:o,staticClass:"user"},[s("div",{staticClass:"head"},[s("img",{attrs:{src:"https://www.bixiaohe.fun/"+e.url}})]),s("div",{staticClass:"name"},[t._v(t._s(e.name))])])})),0),s("div",{staticStyle:{display:"flex",border:"1px solid #999999","font-size":"14px",color:"#dddddd"}},[s("div",{staticClass:"tools"},[s("canvas",{attrs:{id:"color",width:"200",height:"200"}}),s("div",{staticClass:"color-number"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.pen.color,expression:"pen.color"}],domProps:{value:t.pen.color},on:{input:function(e){e.target.composing||t.$set(t.pen,"color",e.target.value)}}})]),s("div",[t._v(" 色板 "),s("div",{staticClass:"color-block"},[s("div",{staticClass:"blk1",on:{click:function(e){return t.colorBlock("#d83741")}}}),s("div",{staticClass:"blk2",on:{click:function(e){return t.colorBlock("#af26b9")}}}),s("div",{staticClass:"blk3",on:{click:function(e){return t.colorBlock("#413bda")}}}),s("div",{staticClass:"blk4",on:{click:function(e){return t.colorBlock("#12c0db")}}}),s("div",{staticClass:"blk5",on:{click:function(e){return t.colorBlock("#22db2a")}}}),s("div",{staticClass:"blk6",on:{click:function(e){return t.colorBlock("#c5d229")}}}),s("div",{staticClass:"blk7",on:{click:function(e){return t.colorBlock("#d1540f")}}}),s("div",{staticClass:"blk8",on:{click:function(e){return t.colorBlock("#ffffff")}}})])]),s("div",{staticClass:"pen"},[t._v(" 画笔 "),s("div",{staticClass:"pen-list"},t._l(t.pens,(function(e,o){return s("div",{key:o,style:{background:e.bg},on:{click:function(e){return t.changeSize(o)}}},[s("div",{staticClass:"pen-size",style:{background:t.bg,width:e.size,height:e.size}})])})),0),s("el-slider",{attrs:{max:"50"},on:{change:function(e){return t.changeSize(t.pen.size)}},model:{value:t.pen.size,callback:function(e){t.$set(t.pen,"size",e)},expression:"pen.size"}})],1),s("div",[t._v(" 透明度 "),s("el-slider",{attrs:{max:"10"},on:{change:function(e){return t.changePellucidity(t.pen.pellucidity)}},model:{value:t.pen.pellucidity,callback:function(e){t.$set(t.pen,"pellucidity",e)},expression:"pen.pellucidity"}})],1)]),s("canvas",{ref:"canvas",attrs:{id:"canv",width:"1000",height:"800"}})])])},W=[],Y=(s("cb29"),s("fb6a"),s("d3b7"),s("25f0"),{data:function(){return{user:this.$store.state.user,draw:!1,list:[this.$store.state.user],pen:{color:"#6b2d96",size:1,pellucidity:10},initPoint:{offsetX:1,offsetY:1},pens:[{size:"1px",bg:""},{size:"2px",bg:""},{size:"4px",bg:""},{size:"6px",bg:""},{size:"8px",bg:""},{size:"10px",bg:""},{size:"12px",bg:""},{size:"14px",bg:""},{size:"16px",bg:""}],bg:"#dddddd"}},sockets:{ac:function(t){window.console.log(t);var e=document.getElementById("canv"),s=e.getContext("2d");s.strokeStyle=t.pen.color,s.fillStyle=t.pen.color,s.lineWidth=t.pen.size,1===t.arr.length?(s.beginPath(),s.moveTo(t.arr[0].x,t.arr[0].y),s.arc(t.arr[0].x,t.arr[0].y,t.pen.size/2,0,2*Math.PI,!0),s.fill()):t.arr.forEach((function(t){s.lineTo(t.x,t.y),s.stroke()})),s.beginPath(),s.fillStyle=this.pen.color,s.lineWidth=this.pen.size},RoomInit:function(t){var e=document.getElementById("canv"),s=e.getContext("2d"),o=new Image;o.src=t,o.onload=function(){s.drawImage(o,0,0,1e3,800)}},addUser:function(t){window.console.log("addUser",t),this.list=t.user},houseList:function(t){var e=this;t.forEach((function(t){t.houseId==e.$route.query.houseId&&(e.list=t.user)}))}},methods:{canvInit:function(){var t=this,e=[],s=document.getElementById("color"),o=s.getContext("2d");o.beginPath();var i=o.createLinearGradient(0,0,0,160);i.addColorStop(0,"#f00"),i.addColorStop(1/6,"#f0f"),i.addColorStop(2/6,"#00f"),i.addColorStop(.5,"#0ff"),i.addColorStop(4/6,"#0f0"),i.addColorStop(5/6,"#ff0"),i.addColorStop(1,"#f00"),o.fillStyle=i,o.fillRect(0,0,20,160),s.addEventListener("mousedown",d,!1);var n=document.getElementById("canv"),a=n.getContext("2d");function r(s){var o=s.offsetX,i=s.offsetY;this.draw=!0,a.fillStyle=t.pen.color,a.strokeStyle=t.pen.color,a.lineWidth=t.pen.size,window.console.log("鼠标按下：",t.pen),a.arc(o,i,t.pen.size/2,0,2*Math.PI,!0),a.fill(),a.beginPath(),a.moveTo(o,i),e.push({x:o,y:i})}function l(){this.draw=!1,a.beginPath(),t.$socket.emit("action",{houseId:t.$route.query.houseId,arr:e,pen:t.pen}),e=[]}function c(s){var o=s.offsetX,i=s.offsetY;!0===this.draw&&(e.push({x:o,y:i}),a.fillStyle=t.pen.color,a.lineWidth=t.pen.size,a.lineTo(o,i),a.stroke())}function u(){this.draw=!1}function d(e){var s=o.getImageData(e.offsetX,e.offsetY,1,1);if(t.pen.color=t.rgb(s.data),e.offsetX<20){var i=o.createLinearGradient(30,0,170,0);i.addColorStop(1,t.pen.color),i.addColorStop(0,"white"),o.fillStyle=i,o.fillRect(30,0,190,160);var n=o.createLinearGradient(30,0,30,140);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=n,o.fillRect(30,0,190,160)}(e.offsetX>20||1===e.offsetX)&&(o.fillStyle=t.pen.color,o.fillRect(0,170,20,20),a.strokeStyle=t.pen.color)}a.lineCap="round",a.fillStyle="#fff",a.fillRect(0,0,1e3,800),n.addEventListener("mousedown",r,!1),n.addEventListener("mouseup",l,!1),n.addEventListener("mousemove",c,!1),n.addEventListener("mouseout",u,!1),d(this.initPoint)},rgb:function(t){var e=(1<<24)+65536*t[0]+256*t[1]+t[2];return e=e.toString(16),"#"+e.slice(1)},colorBlock:function(t){this.pen.color=t;var e=document.getElementById("color"),s=e.getContext("2d"),o=document.getElementById("canv"),i=o.getContext("2d");s.fillStyle=t,s.fillRect(0,170,20,20),i.strokeStyle=this.pen.color},changeSize:function(t){var e=this;this.pen.size=t+1;var s=document.getElementById("canv"),o=s.getContext("2d");o.lineWidth=t+1,this.pens.forEach((function(s,o){e.pens[o].bg=o===t?"#aaaaaa":""})),o.globalAlpha=.1*this.pen.pellucidity}},mounted:function(){var t=this;this.canvInit(),this.$nextTick((function(){t.$socket.emit("RoomInit",{houseId:t.$route.query.houseId,userId:t.$store.state.user.id})}))}}),G=Y,K=(s("991b"),Object(w["a"])(G,M,W,!1,null,"9c51bad0",null)),Q=K.exports;o["default"].use(y["a"]);var V=new y["a"]({routes:[{path:"/",component:S,meta:{title:"登录"}},{path:"/hall",component:A,meta:{title:"大厅"},children:[{path:"/",component:H},{path:"/paint",component:Q,meta:"画室"}]}]});o["default"].use(d["a"]),o["default"].use(new c.a({debug:!1,connection:"wss://www.bixiaohe.fun"})),r.a.defaults.withCredentials=!0,o["default"].prototype.$axios=r.a,o["default"].use(n.a),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(x)},router:V,store:f}).$mount("#app")},"85ec":function(t,e,s){},9086:function(t,e,s){"use strict";var o=s("b586"),i=s.n(o);i.a},9255:function(t,e,s){"use strict";var o=s("1707"),i=s.n(o);i.a},"991b":function(t,e,s){"use strict";var o=s("1eb4"),i=s.n(o);i.a},a5b1:function(t,e,s){},b586:function(t,e,s){},bef0:function(t,e,s){t.exports=s.p+"img/login_bg.e800ce2e.jpg"},bf5a:function(t,e,s){t.exports=s.p+"img/add3.2ea5a63b.png"}});